% Copyright 2015 Jonathan Eyolfson
%
% This work is licensed under a Creative Commons Attribution-ShareAlike 4.0
% International License. You should have received a copy of the license along
% with this work. If not, see <http://creativecommons.org/licenses/by-sa/4.0/>.

\documentclass[12pt]{book}

\usepackage{amsmath}
\usepackage{fontspec}
\usepackage[margin=2.54cm, paper=letterpaper]{geometry}
\usepackage[newfloat]{minted}
\usepackage{tikz}

\setmainfont[Ligatures=TeX]{Tinos}
\setsansfont{Arimo}[Scale=MatchLowercase]
\setmonofont{Cousine}[Scale=MatchLowercase]

\definecolor{solarizedBase03}{RGB}{0, 43, 54}
\definecolor{solarizedBase0}{RGB}{131, 148, 150}
\definecolor{solarizedBlue}{RGB}{38, 139, 210}

\begin{document}

  \begin{titlepage}
    \begin{tikzpicture}[remember picture, overlay]
      \draw[draw=none, fill=solarizedBase03]
        (current page.north west) rectangle (current page.south east);
      \node[color=solarizedBlue, text width=5em, text centered, scale=9]
        (title) at (current page.center) {\texttt{The Big Book of Computing}};
      \node[anchor=south west, inner sep=5mm, color=solarizedBase0, scale=2]
        at (current page.south west) {\textsf{0.0.1-development}};
      \node[anchor=south east, inner sep=5mm, color=solarizedBase0, scale=2]
        at (current page.south east) {\textsf{Jonathan Eyolfson}};
    \end{tikzpicture}
  \end{titlepage}

  \tableofcontents

  \include{chapter/mathematical-basics}
  \include{chapter/booleans}
  \include{chapter/encodings}

  \chapter{Programming Languages}

  \section{Assembly}

  \subsection{x86\_64}

  \begin{listing}[H]
    \inputminted[frame=lines]{asm}{code/hello_world.asm}
    \caption{``Hello world'' program written in x86\_64 assembly for Linux}
    \label{lst:hello-world-asm}
  \end{listing}

  Assuming the file is called ``\mintinline{console}{hello_world.asm}'' we need
  to compile to machine code using
  \mintinline{console}{nasm -f elf64 hello_world.asm}. This produces a file
  named ``\mintinline{console}{hello_world.o}'' which is an object file (more
  later). To produce an executable file that will run on the machine use
  \mintinline{console}{ld hello_world.o -o hello_world}. This produces an
  executable named ``\mintinline{console}{hello_world}''. Running the program
  using \mintinline{console}{./hello_world} produces the output
  ``\mintinline{console}{Hello world!}''.

  x86\_64 has 16 general purpose registers: \mintinline{asm}{rax},
  \mintinline{asm}{rbx}, \mintinline{asm}{rcx}, \mintinline{asm}{rdx},
  \mintinline{asm}{rbp}, \mintinline{asm}{rsi}, \mintinline{asm}{rdi},
  \mintinline{asm}{rsp}, \mintinline{asm}{r8}, \mintinline{asm}{r9},
  \mintinline{asm}{r10}, \mintinline{asm}{r11}, \mintinline{asm}{r12},
  \mintinline{asm}{r13}, \mintinline{asm}{r14}, and \mintinline{asm}{r15}. The
  stack pointer is \mintinline{asm}{rsp} and it is always(?) in use.

  Note that the system call number goes in register \mintinline{asm}{rax}. Note
  that (on x86\_64) the system call number for \mintinline{asm}{write} is
  \texttt{1} and for \mintinline{asm}{exit_group} is \texttt{231}. The arguments
  to the system call go in registers according to the following table:

  {\ttfamily\begin{tabular}{c c}
    \hline
    Index & Register \\
    \hline
    0 & \mintinline{asm}{rdi} \\
    1 & \mintinline{asm}{rsi} \\
    2 & \mintinline{asm}{rdx} \\
    3 & \mintinline{asm}{r10} \\
    4 & \mintinline{asm}{r8} \\
    5 & \mintinline{asm}{r9} \\
  \end{tabular}}

  In C, \mintinline{asm}{rcx} is used instead of \mintinline{asm}{r10} for
  the argument at index 3. The kernel destroys registers in
  \mintinline{asm}{rcx} and \mintinline{asm}{r11}. Registers
  \mintinline{asm}{rbp}, \mintinline{asm}{rbx}, \mintinline{asm}{r12},
  \mintinline{asm}{r13}, \mintinline{asm}{r14}, and \mintinline{asm}{r15} belong
  to the calling function and are untouched by the kernel.

  \chapter{Programming}

  \section{Parallelism}

  \subsection{Limitations}

  \subsubsection{Amdahl's Law}

  Let $N$ be the number of parallel executions.

  \noindent Let $S$ be the fraction of serial runtime for a serial execution.

  \noindent Let $P$ be the fraction of parallel runtime for a serial execution.

  \vspace{1em}

  $\text{speedup} = \frac{1}{S + \frac{P}{N}}$

  \subsubsection{Gustafson's Law}

  Let $N$ be the number of parallel executions.

  \noindent Let $n$ be a measure of the problem size.

  \noindent Let $S(n)$ be the fraction of serial runtime for a parallel
  execution.

  \noindent Let $P(n)$ be the fraction of parallel runtime for a parallel
  execution.

  \vspace{1em}

  $\text{speedup} = S(n) + N \cdot P(n)$

  \chapter{Linux Kernel}

  Include memory allocation declarations with
  \mintinline{c}{#include <linux/slab.h>}.

  \section{Userland API}

  \chapter{Cryptography}

  \section{Block Ciphers}

  \subsection{Modes of Operation}

  \subsubsection{Electronic Codebook (ECB)}

  \subsubsection{Cipher Block Chaining (CBC)}

  \subsubsection{Counter (CTR)}

  \chapter{Information Theory}

  \section{Hamming Distance}

  A measure of how many characters are different in two strings of equal length.

  Example: Consider the two ASCII encoded strings ``this is a test'' and ``wokka
  wokka!!!''. Both have the same length of 14 characters. If each character is
  represented as 8 bits we have to many 112 comparsions ($14 \times 8$).

  \texttt{t} is $116 = (74)_{16} = (01110100)_{2}$

  \texttt{w} is $119 = (77)_{16} = (01110111)_{2}$

  This hamming distance between these two characters is 2.

  \texttt{h} is $104 = (68)_{16} = (01101000)_{2}$

  \texttt{o} is $111 = (6\text{F})_{16} = (01101111)_{2}$

  This hamming distance between these two characters is 3, running total of 5.

  \texttt{i} is $105 = (69)_{16} = (01101001)_{2}$

  \texttt{k} is $107 = (6\text{B})_{16} = (01101011)_{2}$

  This hamming distance between these two characters is 1, running total of 6.

  And so on, the hamming distance of these two strings is 37.

\end{document}
